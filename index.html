<!-- Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ù…Ø­Ø³Ù† Ø¨ØµØ±ÙŠØ§Ù‹ Ù…Ø¹ ÙƒØ§ÙØ© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ù„Ù„Ø­ÙƒÙ…</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      direction: rtl;
      background: linear-gradient(to right, #f7f9fc, #ffffff);
      margin: 20px;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      border: 1px solid #000;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
      overflow: hidden;
    }

    th, td {
      border: 1px solid #000;
      padding: 8px;
      font-size: 14px;
      vertical-align: middle;
    }

    th {
      background-color: #f0f0f0;
      text-align: center;
    }

    input, textarea, select {
      width: 98%;
      padding: 4px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
      transition: all 0.3s ease;
    }

    input:focus, textarea:focus, select:focus {
      border-color: #007BFF;
      background-color: #f0f8ff;
      outline: none;
    }

    .section-title {
      background-color: #ddd;
      font-weight: bold;
      text-align: center;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007BFF;
      color: #fff;
      border: none;
      cursor: pointer;
      position: relative;
      transition: background-color 0.3s ease;
    }

    button::after {
      content: "ğŸš€";
      position: absolute;
      right: -30px;
      opacity: 0;
      transition: right 0.4s ease, opacity 0.4s ease;
    }

    button:hover {
      background-color: #0056b3;
    }

    button:hover::after {
      right: 10px;
      opacity: 1;
    }

    .status-message {
      margin: 15px 0;
      padding: 10px;
      font-weight: bold;
      text-align: center;
      border-radius: 5px;
      display: none;
    }

    .success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    #loader {
      text-align: center;
      margin: 10px;
      display: none;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="status" class="status-message"></div>
  <div id="loader">â³ Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>

  <form id="engagementForm">
    <table>
      <tr><th colspan="4">FICHE Dâ€™ENGAGEMENT ARBITRE / Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ù„Ù„Ø­ÙƒÙ…</th></tr>
      <tr>
        <td colspan="2">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø±Ù‚Ù… ØªØ­ÙƒÙŠÙ…ÙŠØŸ</td>
        <td colspan="2">
          <select id="hasCode" name="hasCode" onchange="toggleCodeField()" required>
            <option value="">-- Ø§Ø®ØªØ± --</option>
            <option value="yes">Ù†Ø¹Ù…</option>
            <option value="no">Ù„Ø§</option>
          </select>
        </td>
      </tr>
      <tr id="codeRow" style="display: none;">
        <td colspan="2">Ø±Ù‚Ù…Ùƒ Ø§Ù„ØªØ­ÙƒÙŠÙ…ÙŠ:</td>
        <td colspan="2"><input type="text" id="refCode" name="refCode" placeholder="Ù…Ø«Ø§Ù„: ARB_0087"></td>
      </tr>
      <tr><td colspan="2">ğŸ“· ØµÙˆØ±Ø© Ø§Ù„Ø­ÙƒÙ…:</td><td colspan="2"><input type="file" name="refImage" accept="image/*"></td></tr>
      <tr><td colspan="2">Nom / Ø§Ù„Ø§Ø³Ù…:</td><td colspan="2"><input type="text" name="fullName" required></td></tr>
      <tr><td colspan="2">PrÃ©nom / Ø§Ù„Ù„Ù‚Ø¨:</td><td colspan="2"><input type="text" name="lastName"></td></tr>
      <tr><td colspan="2">Date et lieu de naissance / ØªØ§Ø±ÙŠØ® ÙˆÙ…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:</td><td colspan="2"><input type="text" name="birthInfo"></td></tr>
      <tr><td colspan="2">Situation familiale / Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„ÙŠØ©:</td><td colspan="2"><input type="text" name="familyStatus"></td></tr>
      <tr><td colspan="2">Adresse / Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</td><td colspan="2"><input type="text" name="address"></td></tr>
      <tr><td colspan="2">Mobile / Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù†Ù‚Ø§Ù„:</td><td colspan="2"><input type="text" name="mobile"></td></tr>
      <tr><td colspan="2">Email / Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</td><td colspan="2"><input type="email" name="email"></td></tr>
      <tr><td colspan="2">Niveau d'instruction / Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…:</td><td colspan="2"><input type="text" name="education"></td></tr>
      <tr><td colspan="2">Fonction / Ø§Ù„ÙˆØ¸ÙŠÙØ©:</td><td colspan="2"><input type="text" name="job"></td></tr>
      <tr><td colspan="4" class="section-title">DÃ©claration / Ø§Ù„ØªØµØ±ÙŠØ­</td></tr>
      <tr><td colspan="4"><textarea name="declaration" rows="4" placeholder="Ù†Øµ Ø§Ù„ØªØµØ±ÙŠØ­..." required></textarea></td></tr>
      <tr><td colspan="2">Fait Ã  / Ø­Ø±Ø± Ø¨Ù€:</td><td><input type="text" name="location"></td><td>le / ÙÙŠ: <input type="date" name="date"></td></tr>
      <tr><td colspan="4">Signature Arbitre / Ø¥Ù…Ø¶Ø§Ø¡ Ø§Ù„Ø­ÙƒÙ…: <input type="text" name="signature" required></td></tr>
      <tr><td colspan="2">Avis du PrÃ©sident / Ø±Ø£ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³:</td>
          <td colspan="2">
            <label><input type="radio" name="presidentOpinion" value="Favorable"> Favorable</label>
            <label><input type="radio" name="presidentOpinion" value="DÃ©favorable"> DÃ©favorable</label>
          </td></tr>
      <tr><td colspan="2">Avis du DTRA / Ø±Ø£ÙŠ Ø§Ù„Ù…Ø¯ÙŠØ±:</td>
          <td colspan="2">
            <label><input type="radio" name="dtraOpinion" value="Favorable"> Favorable</label>
            <label><input type="radio" name="dtraOpinion" value="DÃ©favorable"> DÃ©favorable</label>
          </td></tr>
      <tr><td colspan="4" style="text-align:center;"><button type="submit">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ / Envoyer</button></td></tr>
    </table>
  </form>

  <script>
    function toggleCodeField() {
      const hasCode = document.getElementById("hasCode").value;
      document.getElementById("codeRow").style.display = hasCode === "yes" ? "table-row" : "none";
    }

    function showMessage(type, message) {
      const statusDiv = document.getElementById("status");
      statusDiv.textContent = message;
      statusDiv.className = `status-message ${type}`;
      statusDiv.style.display = "block";
      setTimeout(() => {
        statusDiv.style.display = "none";
      }, 6000);
    }

    document.getElementById("engagementForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => data[key] = value);

      if (data["hasCode"] === "yes" && !data["refCode"]) {
        showMessage("error", "âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙƒÙŠÙ…ÙŠ.");
        return;
      }

      document.getElementById("loader").style.display = "block";

      fetch("https://script.google.com/macros/s/AKfycbxx9QTFxvMZk021KnPZXzxWhBKoLH55ObXs_XXyosInni1jCj2KTqSQNpRcMPRsfpsW/exec", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(() => {
        document